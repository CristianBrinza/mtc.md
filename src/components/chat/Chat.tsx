import React, { useEffect, useState } from 'react';
import styles from './Chat.module.css';
import { Link } from 'react-router-dom';
import { useTranslation } from 'react-i18next';

const Chat: React.FC = () => {
  const [activeOverlay, setActiveOverlay] = useState(false);
  const { t } = useTranslation();
  // Fix for iOS 100vh bug
  useEffect(() => {
    const setVh = () => {
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    };
    setVh();
    window.addEventListener('resize', setVh);
    return () => window.removeEventListener('resize', setVh);
  }, []);

  return (
    <>
      <div
        className={`${styles.chat_overlay} ${activeOverlay && styles.chat_overlay_active}`}
        onClick={() => setActiveOverlay(!activeOverlay)}
      >
        <Link
          className={`${styles.chat_icon_svg} ${styles.chat_icon_telegram}`}
          to="https://t.me/MoldtelecomChatBot"
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_11235_4132)">
              <path
                d="M12 0C8.81813 0 5.76375 1.26506 3.51562 3.51469C1.2652 5.76522 0.000643966 8.81734 0 12C0 15.1813 1.26562 18.2357 3.51562 20.4853C5.76375 22.7349 8.81813 24 12 24C15.1819 24 18.2363 22.7349 20.4844 20.4853C22.7344 18.2357 24 15.1813 24 12C24 8.81869 22.7344 5.76431 20.4844 3.51469C18.2363 1.26506 15.1819 0 12 0Z"
                fill="#2AABEE"
              />
              <path
                d="M5.43087 11.8735C8.92962 10.3495 11.2621 9.34479 12.4284 8.85929C15.7621 7.4731 16.454 7.23235 16.9059 7.22419C17.0052 7.2226 17.2265 7.24716 17.3709 7.36388C17.4909 7.46232 17.5246 7.59544 17.5415 7.68891C17.5565 7.78229 17.5771 7.9951 17.5602 8.16122C17.3802 10.0587 16.5984 14.6633 16.2009 16.7887C16.034 17.6879 15.7021 17.9894 15.3815 18.0188C14.684 18.083 14.1552 17.5583 13.4802 17.116C12.4246 16.4236 11.8284 15.9927 10.8027 15.3172C9.61774 14.5364 10.3865 14.1072 11.0615 13.406C11.2377 13.2224 14.309 10.4296 14.3671 10.1763C14.3746 10.1446 14.3821 10.0265 14.3109 9.96422C14.2415 9.90179 14.1384 9.92316 14.0634 9.94004C13.9565 9.96404 12.2709 11.0793 9.00087 13.2856C8.52274 13.6145 8.08962 13.7748 7.69962 13.7663C7.27212 13.7572 6.44712 13.5241 5.83399 13.325C5.08399 13.0807 4.48587 12.9515 4.53837 12.5365C4.56462 12.3205 4.86274 12.0995 5.43087 11.8735Z"
                fill="white"
              />
            </g>
            <defs>
              <clipPath id="clip0_11235_4132">
                <rect width="24" height="24" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </Link>

        <Link
          className={`${styles.chat_icon_svg} ${styles.chat_icon_viber}`}
          to="viber://pa?chatURI=moldtelecomchatbot"
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect width="24" height="24" rx="12" fill="#83579E" />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M15.8039 5.90948C13.6279 5.42308 11.3714 5.42308 9.19539 5.90948L8.96093 5.96136C8.34868 6.09784 7.78632 6.40156 7.33647 6.83872C6.88661 7.27587 6.56691 7.8293 6.41296 8.43739C5.86235 10.611 5.86235 12.8876 6.41296 15.0611C6.5598 15.6411 6.85752 16.1718 7.27589 16.5994C7.69426 17.027 8.21836 17.3362 8.79494 17.4957L9.11654 19.4156C9.12681 19.4766 9.15323 19.5337 9.19306 19.581C9.23289 19.6283 9.28467 19.664 9.343 19.6845C9.40134 19.705 9.46409 19.7095 9.52474 19.6974C9.58539 19.6854 9.64171 19.6574 9.68783 19.6162L11.5767 17.9266C12.9946 18.0122 14.4175 17.8988 15.8039 17.5897L16.0391 17.5379C16.6513 17.4014 17.2137 17.0977 17.6635 16.6605C18.1134 16.2233 18.4331 15.6699 18.587 15.0618C19.1377 12.8882 19.1377 10.6117 18.587 8.43809C18.433 7.82991 18.1132 7.27642 17.6632 6.83925C17.2133 6.40209 16.6508 6.09842 16.0384 5.96205L15.8039 5.90948ZM9.77913 8.38137C9.65058 8.36255 9.51947 8.38843 9.40772 8.45468H9.39804C9.13868 8.60684 8.90491 8.79842 8.70572 9.0239C8.53972 9.21548 8.44981 9.40913 8.4263 9.59587C8.41246 9.70654 8.42215 9.81858 8.45465 9.9244L8.4671 9.93131C8.65384 10.4798 8.8973 11.0075 9.1947 11.5041C9.57834 12.2015 10.0502 12.8465 10.5987 13.4234L10.6153 13.4469L10.6416 13.4662L10.6575 13.4849L10.6769 13.5015C11.2557 14.0516 11.9023 14.5257 12.601 14.9124C13.3998 15.3475 13.8846 15.5529 14.1758 15.6386V15.6428C14.2609 15.6691 14.3384 15.6808 14.4165 15.6808C14.6646 15.663 14.8995 15.5622 15.0832 15.3945C15.308 15.1953 15.4982 14.9609 15.6462 14.7001V14.6953C15.7852 14.4324 15.7382 14.1848 15.5376 14.0168C15.1351 13.6643 14.6994 13.3516 14.2367 13.0831C13.9268 12.915 13.6121 13.0167 13.4849 13.1868L13.2131 13.5299C13.0734 13.7 12.8202 13.6765 12.8202 13.6765L12.8133 13.6806C10.9245 13.1986 10.4203 11.2862 10.4203 11.2862C10.4203 11.2862 10.3968 11.0262 10.5717 10.8934L10.912 10.6195C11.0752 10.4867 11.1887 10.1727 11.0137 9.86284C10.7457 9.40044 10.4337 8.96499 10.0821 8.56258C10.0051 8.46809 9.8974 8.40369 9.77774 8.38068M12.9703 7.55003C12.8786 7.55003 12.7906 7.58647 12.7258 7.65132C12.6609 7.71617 12.6245 7.80413 12.6245 7.89585C12.6245 7.98756 12.6609 8.07552 12.7258 8.14038C12.7906 8.20523 12.8786 8.24166 12.9703 8.24166C13.8452 8.24166 14.5714 8.52731 15.1462 9.07508C15.4415 9.37455 15.6718 9.72936 15.8226 10.1181C15.9741 10.5074 16.0432 10.9231 16.0252 11.3395C16.0233 11.3849 16.0304 11.4302 16.046 11.4729C16.0616 11.5156 16.0855 11.5548 16.1163 11.5883C16.1784 11.6558 16.2648 11.696 16.3565 11.6998C16.4482 11.7037 16.5377 11.6709 16.6053 11.6088C16.6729 11.5467 16.713 11.4602 16.7169 11.3685C16.7375 10.8564 16.6525 10.3455 16.4672 9.86768C16.281 9.38741 15.9975 8.95083 15.6345 8.5854L15.6276 8.57849C14.9145 7.89723 14.0119 7.55003 12.9703 7.55003ZM12.9468 8.68707C12.8551 8.68707 12.7671 8.72351 12.7023 8.78836C12.6374 8.85321 12.601 8.94117 12.601 9.03289C12.601 9.1246 12.6374 9.21256 12.7023 9.27742C12.7671 9.34227 12.8551 9.3787 12.9468 9.3787H12.9586C13.5893 9.42366 14.0486 9.63391 14.3702 9.97904C14.7001 10.3345 14.8709 10.7765 14.8578 11.3229C14.8557 11.4146 14.8901 11.5034 14.9534 11.5697C15.0168 11.6361 15.1039 11.6745 15.1956 11.6766C15.2873 11.6788 15.3761 11.6443 15.4425 11.581C15.5088 11.5176 15.5473 11.4305 15.5494 11.3388C15.566 10.6216 15.335 10.0026 14.8771 9.50873V9.50735C14.4089 9.00522 13.7664 8.73964 12.9931 8.68776L12.9814 8.68638L12.9468 8.68707ZM12.9337 9.84555C12.8874 9.84147 12.8407 9.84675 12.7966 9.86109C12.7524 9.87542 12.7115 9.89852 12.6764 9.92899C12.6414 9.95946 12.6128 9.99669 12.5924 10.0384C12.5721 10.0802 12.5603 10.1256 12.5579 10.172C12.5555 10.2184 12.5624 10.2648 12.5784 10.3085C12.5943 10.3521 12.6188 10.3921 12.6505 10.4261C12.6823 10.46 12.7205 10.4872 12.7629 10.5061C12.8054 10.525 12.8512 10.5351 12.8977 10.5358C13.1868 10.551 13.3715 10.6382 13.4876 10.755C13.6045 10.8726 13.6917 11.0614 13.7076 11.3568C13.7085 11.4032 13.7186 11.4489 13.7376 11.4913C13.7565 11.5337 13.7838 11.5718 13.8177 11.6035C13.8517 11.6351 13.8917 11.6595 13.9353 11.6754C13.979 11.6912 14.0253 11.6981 14.0717 11.6957C14.118 11.6932 14.1634 11.6814 14.2051 11.6611C14.2468 11.6407 14.284 11.6121 14.3144 11.5771C14.3449 11.542 14.3679 11.5012 14.3823 11.4571C14.3966 11.4129 14.4019 11.3663 14.3978 11.3201C14.3757 10.9051 14.2457 10.5386 13.9794 10.2688C13.7117 9.99909 13.3472 9.86769 12.9337 9.84555Z"
              fill="white"
            />
          </svg>
        </Link>
        <a
          className={`${styles.chat_icon_svg} ${styles.chat_icon_chat}`}
          href={`https://www.moldtelecom.md/${t('lang')}/chat`}
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect width="24" height="24" rx="12" fill="#F6F6F6" />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M12 7.72222C14.3626 7.72222 16.2778 9.63745 16.2778 12C16.2778 14.3626 14.3626 16.2778 12 16.2778C11.1972 16.2778 10.4478 16.0572 9.80695 15.6737C9.66502 15.5888 9.49473 15.565 9.33497 15.6078L8.04358 15.9539L8.38992 14.6613C8.43268 14.5017 8.40901 14.3316 8.3243 14.1898C7.94204 13.5497 7.72222 12.8014 7.72222 12C7.72222 9.63745 9.63745 7.72222 12 7.72222ZM17.5 12C17.5 8.96243 15.0376 6.5 12 6.5C8.96243 6.5 6.5 8.96243 6.5 12C6.5 12.9338 6.73318 13.8146 7.14476 14.586L6.58905 16.6599C6.53254 16.8708 6.59283 17.0958 6.74721 17.2502C6.9016 17.4046 7.12661 17.4649 7.3375 17.4084L9.40997 16.8531C10.1823 17.266 11.0646 17.5 12 17.5C15.0376 17.5 17.5 15.0376 17.5 12Z"
              fill="#2F3043"
            />
          </svg>
        </a>
      </div>
      <div
        className={styles.chat_icon}
        onClick={() => setActiveOverlay(!activeOverlay)}
      >
        <svg
          width="70"
          height="70"
          viewBox="0 0 70 70"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <rect width="70" height="70" rx="35" fill="#adbbff" />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M35.75 20.4167C43.8042 20.4167 50.3333 26.9459 50.3333 35C50.3333 43.0542 43.8042 49.5833 35.75 49.5833C33.0131 49.5833 30.4583 48.8315 28.2737 47.5242C27.7898 47.2346 27.2093 47.1535 26.6647 47.2994L22.2622 48.479L23.4429 44.0725C23.5887 43.5285 23.508 42.9485 23.2192 42.4652C21.916 40.2829 21.1667 37.7321 21.1667 35C21.1667 26.9459 27.6959 20.4167 35.75 20.4167ZM54.5 35C54.5 24.6447 46.1054 16.25 35.75 16.25C25.3947 16.25 17 24.6447 17 35C17 38.1833 17.7949 41.1862 19.1981 43.8158L17.3036 50.886C17.1109 51.605 17.3165 52.3721 17.8428 52.8985C18.3691 53.4248 19.1362 53.6304 19.8551 53.4377L26.9203 51.5446C29.5532 52.9523 32.561 53.75 35.75 53.75C46.1054 53.75 54.5 45.3554 54.5 35Z"
            fill="#fff"
            stroke="#F7F7F7"
            stroke-width="0.7"
          />
        </svg>
        <div className={styles.chat_icon_circle}></div>
        <div className={styles.chat_icon_animated_circle}></div>
      </div>
    </>
  );
};

export default Chat;
